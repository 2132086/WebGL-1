<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>WebGL1</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/99/three.min.js"></script>
  <script src="https://unpkg.com/three@0.147.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
 <script>
  var init = function() {

    var width = 1024,
        height = 700,
        rot = 0;
        t=0;
        down=0;
  
    // レンダラーを作成
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);
    document.body.appendChild(renderer.domElement);
  
    // シーンを作成
    var scene = new THREE.Scene();
  
    // カメラを作成
    var camera = new THREE.PerspectiveCamera(60, width / height);

    //台
    var cylinderGeometry = new THREE.CylinderGeometry ( 2, 2.25, 1, 10, false );
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff} );
    var bottom = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    bottom.position.set( 0, 0, 10);
    scene.add( bottom );

    //柱
    var cylinderGeometry = new THREE.CylinderGeometry ( 1, 1.8, 15, 8, false );
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff} );
    var pole = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    pole.position.set( 0,7.5, 10);
    scene.add( pole );

    var cylinderGeometry = new THREE.CylinderGeometry ( 0.6, 1, 35, 4, false );
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff} );
    var pole2 = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    pole2.position.set( 0,17.5, 10);
    scene.add( pole2 );

    //電灯
    var cylinderGeometry = new THREE.CylinderGeometry ( 1.4, 0.6, 1, 6);
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff} );
    var lightbottom = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    lightbottom.position.set( 0, 35.5, 10);
    scene.add( lightbottom );

    var cylinderGeometry = new THREE.CylinderGeometry ( 2, 1.3, 3, 6, 1);
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff,wireframe: true} );
    var bulb = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    bulb.position.set( 0, 37.5, 10);
    scene.add( bulb );

    var cylinderGeometry = new THREE.CylinderGeometry ( 0.6, 2.1, 1, 6);
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff} );
    var lighttop = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    lighttop.position.set( 0,39.5, 10);
    scene.add( lighttop );

    var cylinderGeometry = new THREE.CylinderGeometry ( 0.6, 0.6, 0.5, 6);
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff} );
    var lighttop2 = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    lighttop2.position.set( 0,40.25, 10);
    scene.add( lighttop2 );

    
    var cylinderGeometry = new THREE.CylinderGeometry ( 0.2, 0.3, 1, 6);
    var cylinderMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff} );
    var lighttop3 = new THREE.Mesh( cylinderGeometry, cylinderMaterial );
    lighttop3.position.set( 0,41, 10);
    scene.add( lighttop3 );


    //ボール
    var sphereGeometry = new THREE.SphereGeometry( 1.5, 8, 8 ); 
    var sphereMaterial = new THREE. MeshPhongMaterial( {color: 0xffffff,wireframe: true} );
    var ball = new THREE.Mesh( sphereGeometry, sphereMaterial )
    ball.position.set( 10, 1.5, -15 );
    scene.add( ball );

    //環境光
    var ambientlight = new THREE.AmbientLight(0xffa954, 0.3);
    scene.add(ambientlight);
    //街灯
    var pointlight = new THREE.PointLight(0xFFFFFF, 2, 100, 1);
    pointlight.position.set(0,40,10);
    scene.add(pointlight);
    //太陽光
    var pointlight = new THREE.PointLight(0xf29944, 2, 200, 1);
    pointlight.position.set(-100,50,-100);
    scene.add(pointlight);
  
    // 初回実行
    var update = function() {
      if(t==0){
        down=0;
      }
      if(t=1.6){
        down=1;
      }
      if(down==0){
        ball.position.y=4.9*(1.75-t)*(1.75-t);
        t +=0.016;
      }
      if(down==1){
        ball.position.y=-4.9*(1.75-t)*(1.75-t);
        t -=0.016;
      }
      rot +=0.2;
      var radian = rot * Math.PI / 180;
      camera.position.x = 50 * Math.sin(radian);
      camera.position.y = 20;
      camera.position.z = 50 * Math.cos(radian);
      camera.lookAt(new THREE.Vector3(0, 20, 0));
      requestAnimationFrame(update);
      renderer.render(scene, camera);
    }

    update();
  }
  window.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
